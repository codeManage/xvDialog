!function(a,b){var c={doms:{maskDrag:"xv_Mask_Drag",maskBox:"xv_Mask_Box",maskConBrd:"xv_Mask_Border",maskBoxCon:"xv_Mask_Container",maskBoxMain:"xv_Mask_Main",maskMsgBox:"xv_Mask_Msg_Box",maskBoxTit:"xv_Mask_Box_Tit",maskBoxTitMsg:"xv_Mask_Box_Tit_Msg",maskTxtBox:"xv_Mask_Txt_Box",maskTxt:"xv_Mask_Txt",maskIframe:"xv_Mask_Iframe",iframeName:"xv_Mask_Iframe_Name_",iframeId:"xv_Mask_Iframe_Id_",tip:"xv_Mask_Tip",tipTxt:"xv_Mask_Tip_Txt",tipAlign:"xv_Tip_Align_",maskBoxFoot:"xv_Mask_Box_Foot",maskBoxBtn:"xv_Mask_Box_Btn",maskBoxCloseBtn:"xv_Mask_Box_CloseBtn",maskBoxCancelBtn:"xv_Mask_Box_CancelBtn",maskBoxOkBtn:"xv_Mask_Box_OkBtn",icon:"xv_Mask_Icon",waring:"xv_Mask_Waring",type:"xvmktype",times:"mktimes",mkrAnimate:"xv_reset_animate",mkAnimate:"xv_dlt_animate"},type:{dialog:"dialog",iframe:"iframe",tips:"tips",confirm:"confirm",message:"message"},defaultSize:{wh:{width:200,height:100},dltGap:10,zIndex:19890620}};a.xvDialog={index:0,mkSign:0,alert:function(a){var a=a||{},c={title:"提示信息",iconType:"info",width:300,height:200};return"auto"===a.size&&(delete c.width,delete c.height),a=b.extend(c,a,{type:"dialog",contentId:"",content:""}),b.xvDialog(a)},contentPage:function(a){var a=a||{},c={closeAction:"hide",title:!1,buttons:!1};return a=b.extend(c,a,{type:"dialog",contentMsg:""}),b.xvDialog(a)},iframe:function(a){var a=a||{},c={title:!1,buttons:!1};return a=b.extend(c,a,{type:"iframe"}),b.xvDialog(a)},tips:function(a){var a=a||{},c={align:"right",mask:!1,position:{left:0,top:0}};return a=b.extend(c,a,{type:"tips"}),b.xvDialog(a)},close:function(a,d){if(!a&&0!==a)return!1;var e,f=Number(a),g=c.doms.type,h=c.doms.times;f>=0?e=b("["+h+"="+f+"]"):"string"==typeof a?e=b("all"===a?"["+g+"]":"["+g+"="+a+"]"):Number(a.index)>=0&&(e=a.config.body.find("["+h+"="+a.index+"]")),d&&"hide"===d?e.hide():e.remove()}},b.xvDialog=function(a){var e,f=a.contentId||a.id;if("hide"==a.closeAction&&f){var g=b("#"+f).parents("."+c.doms.maskBoxCon);return g.length?(e=xvDialog["xvmksign"+g.attr("xvmksign")],e.show(),e):e=xvDialog["xvmksign"+xvDialog.mkSign++]=new d(a)}return new d(a)};var d=function(a){this.building(a)};d.pt=d.prototype={settings:function(a){var b=this,d={};switch(b.index=d.index=Number(a.index)>=0?a.index:xvDialog.index++,d.type=a.type||"dialog",d.closeBtn=a.closeBtn||a.closeBtn===!1?a.closeBtn:"",d.mask=a.mask===!1?a.mask:"",d.closeTimes=a.closeTimes||"",d.closeAction=a.closeAction||"",d.openWindow=a.openWindow||window,d.esc=a.esc||"",d.id=a.id||"",d.drag=a.drag||a.drag===!1?a.drag:"",d.content=a.content||"",d.contentMsg=a.contentMsg||"",d.contentId=a.contentId||"",d.animate=a.animate||a.animate===!1?a.animate:[c.doms.mkrAnimate,c.doms.mkAnimate],d.zIndex=parseInt(a.zIndex)||c.defaultSize.zIndex,d.type){case"dialog":d=b.pubOptions("dialog",d,a);break;case"iframe":d=b.pubOptions("iframe",d,a);break;case"tips":if(d.align=a.align||"right",d.follow=a.follow||"",a.position){var e=a.position;d.position=e,d.position.left=e?e.left:0,d.position.top=e?e.top:0}else d.position={left:0,top:0}}return(Number(a.width)>0||Number(a.height)>0)&&(d.wh={width:a.width||"auto",height:a.height||"auto"}),d},pubOptions:function(a,b,d){var e=this;return b.load=d.load&&"function"==typeof d.load?d.load:"",b.title=d.title||d.title===!1?d.title:"",b.icon=d.icon,b.scroll=d.scroll!==!1,b.scrollX=d.scrollX!==!1,b.scrollY=d.scrollY!==!1,b.showAlign=d.showAlign||"",b.buttons="object"==typeof d.buttons||d.buttons===!1?d.buttons:[{type:"ok",text:"确定",cls:c.doms.maskBoxOkBtn,callback:function(){var a="function"==typeof d.okBtn?d.okBtn(e):"";a!==!1&&e.close()}},{type:"cancel",text:"取消",cls:c.doms.maskBoxCancelBtn,callback:function(){var a="function"==typeof d.cancelBtn?d.cancelBtn(e):"";a!==!1&&e.close()}}],"iframe"===a&&(b.iframe=d.iframe||""),b.iconType=d.iconType||"success",b},building:function(a){var d,e=this,f=e.config=e.settings(a),g=e.index,h=c.doms,i=c.type,j=e.currentType=i[f.type],k=e.config.body=b("body",f.openWindow.document);e.config.openWindow=b(f.openWindow),e.config.currentWindow=b(window);var l=f.animate===!1?"":f.animate[0]||h.mkrAnimate,m="<div id='"+h.maskBox+"_"+g+"' class='"+h.maskBox+"' "+h.type+"='"+j+"' "+h.times+"='"+g+"' xvmksign='"+xvDialog.mkSign++ +"' style='z-index:"+(f.zIndex+g)+";'></div>",n="<div class='"+h.maskBoxCon+" "+l+"' "+h.type+"='"+j+"' "+h.times+"='"+g+"' xvmksign='"+xvDialog.mkSign+"' style='z-index:"+(f.zIndex+g+1)+";'><div class='"+h.maskConBrd+"'><div class='"+h.maskBoxMain+"' id='"+(f.id||h.maskBoxMain+g)+"'><div class='"+h.maskTxtBox+"'>"+(f.icon===!1?" ":"<i class='"+h.icon+" "+h.icon+"_"+f.iconType+"'></i>")+"<div class='"+h.maskTxt+"'></div></div></div><div class='"+h.maskBoxFoot+"'></div></div></div>",o="<div class='"+h.maskBoxCloseBtn+"'>x</div>";switch("hide"===f.closeAction&&(xvDialog["xvmksign"+xvDialog.mkSign]=e),e.mkObj={},j){case i.dialog:d=e.pubDlgArea(i.dialog,o,n,m);break;case i.tips:var p="<div id='"+h.tip+"_"+g+"' class='"+h.tip+" "+h.tipAlign+f.align+"' "+h.type+"='"+j+"' "+h.times+"='"+g+"' style='z-index:"+(f.zIndex+g+1)+";'><i class='"+h.icon+"'></i><em></em><div class='"+h.tipTxt+"'>"+f.contentMsg+"</div></div>";p=b(p).appendTo(k),e.mkObj={ctr:p},f.closeBtn!==!1?e.mkObj.clsBtn=b(o).appendTo(p):"";break;case i.iframe:d=e.pubDlgArea(i.iframe,o,n,m)}f.mask===!1?"":e.mkObj.mkBox=b(m).appendTo(k),e.resetEvent(j)},pubDlgArea:function(a,d,e){var f=this,g=f.index,h=f.config,i=c.doms,j="<div class="+i.maskBoxTit+"><p class='"+i.maskBoxTitMsg+"'>"+h.title+"</p></div>",k=h.content?h.content:"",l=h.contentMsg?h.contentMsg:"",m=h.contentId?h.contentId:"",n=h.iframe&&h.iframe.src?"<iframe id='"+(h.iframe.id||i.iframeId+g)+"' name='"+(h.iframe.name||i.iframeName+g)+"' frameborder='0' src='"+h.iframe.src+"' width='"+(h.iframe.width||"auto")+"' height='"+(h.iframe.height||"auto")+"'></iframe>":"",e=b(e).appendTo(h.body),o=e.find("."+i.maskConBrd),p=e.find("."+i.maskBoxMain),q=e.find("."+i.maskBoxFoot),r={overflow:"auto"};if(("dialog"===a||"iframe"===a)&&(h.scroll===!1?r.overflow="hidden":h.scrollX===!1?r["overflow-x"]="hidden":h.scrollY===!1&&(r["overflow-y"]="hidden"),p.css(r),k&&(p.html(k),h.load?h.load(f):""),l&&b("<div></div>").text(l).appendTo(p.find("."+i.maskTxt)),m&&p.html(b("#"+m))),"iframe"===a&&n){p.html(n);var s=p.find("iframe");s.load(function(){h.load?h.load(f,f.config.win):""})}f.mkObj.ctr=e,f.mkObj.brd=o,f.mkObj.main=p,h.title!==!1?f.mkObj.tit=b(j).prependTo(o):"",h.closeBtn!==!1?f.mkObj.clsBtn=b(d).appendTo(o):"",h.buttons!==!1?(f.mkObj.ft=q,f.mkObj.buttons=f.setButtons(q)):q.hide()},setButtons:function(a){for(var d=this,e=d.config,f=[],g=e.buttons,h=0;h<g.length;h++){var i=e.buttons[h],j=i.id?" id='"+i.id+"' ":"id='"+i.type+"_"+d.index+"_"+h+"'";if("object"==typeof i&&i.type){var k=b("<span "+(j||"")+"xv-button-type='"+i.type+"' class='"+c.doms.maskBoxBtn+" "+(i.cls||"")+"'>"+(i.text||"")+"</span>"),l=i.callback||"";k.appendTo(a),"function"==typeof l&&k.on("click",{callback:l},function(a){a.data.callback(d)}),f.push(k)}}return f},computeBoxSize:function(){var a=this.mkObj,b=this.config,c=a.brd,d=a.main,e=a.ctr,f=a.tit?a.tit.outerHeight():0,g=a.ft?a.ft.outerHeight():0,h=c.outerWidth(),i=c.outerHeight(),j=parseInt(a.brd.css("borderLeftWidth"));if(j=j?j:0,b.wh){var k=Number(b.wh.width),l=Number(b.wh.height);k>0&&(h=k,c.outerWidth(h)),l>0&&(i=l,c.outerHeight(i))}var m=i-2*j-g-f,n=h-2*j;d.outerHeight(m);var o=(d[0].clientWidth,n-d[0].clientWidth);return o>0&&(h+=o),e.height(i),e.width(h),{w:h,h:i}},computeCenter:function(a){var b,c,d,e,f=this.config.openWindow;return a&&a.length?(b=a.outerWidth(),c=a.outerHeight()):(b=this.boxSize.w,c=this.boxSize.h),d=f.width()-b,e=f.height()-c,{left:d>0?d/2:0,top:e>0?e/2:0}},setPosition:function(a){var b,c,d,e=a.data?a.data:a,f={},g=e.that||this,h=e.obj?e.obj:g.mkObj.ctr,i=g.config.openWindow;b=a.data&&a.data.auto?g.computeCenter():e,Number(b.right)>=0?(c=i.width()-g.boxSize.w-b.right,f.right=b.right):Number(b.left)>=0&&(c=b.left,f.left=b.left),Number(b.bottom)>=0?(d=i.height()-g.boxSize.h-b.bottom,f.bottom=b.bottom):Number(b.top)>=0&&(d=b.top,f.top=b.top),g.mkObj.ctr.ps={left:c,top:d},h.css(g.mkObj.ctr.ps),b.type&&h.css(f)},resetEvent:function(a){var d,e=this,f=e.mkObj,g=e.config,h=g.openWindow,i=g.body,j=f.ctr,k=Number(g.closeTimes);if("dialog"==a||"iframe"==a)e.boxSize=e.computeBoxSize(),j.ps={left:0,top:0},g.showAlign?(e.setPosition(g.showAlign),d=b.extend(g.showAlign,{type:!0,that:e})):(e.setPosition(e.computeCenter()),d={auto:!0,type:!0,that:e}),h.on("resize",d,e.setPosition),h.on("scroll",function(a){}),f.tit&&g.drag!==!1?e.drag(f.tit):"",g.animate!==!1?j.addClass(g.animate[1]||g.animate):j.css({opacity:1});else if("tips"==a){var l=f.ctr,m=i.find(g.follow),n=m.outerWidth(),o=m.outerHeight(),p=l.outerWidth(),q=l.outerHeight(),r=g.position,s=m.offset(),t={left:0,top:0},u=c.defaultSize.dltGap;if(t="left"==g.align?{left:s.left-p+r.left-u,top:s.top+r.top}:"top"==g.align?{left:s.left+r.left,top:s.top-q-r.top-u}:"bottom"==g.align?{left:s.left+r.left,top:s.top+o+r.top+u}:{left:s.left+n+r.left+u,top:s.top+r.top},t.opacity=1,g.animate===!1)l.css(t);else{l.css({left:t.left+10,top:t.top-20}).addClass(g.animate[1]);var v=setTimeout(function(){l.css(t),v=null},30)}}k>0&&(e.timer=setTimeout(function(){e.close()},k)),g.closeBtn!==!1?f.clsBtn.on("click",{that:e},e.close):"",g.esc!==!1?h.on("keyup",{that:e},e.close):""},close:function(a){if(a&&a.keyCode){var b;if(27!==a.keyCode)return!1;b=!0}var c=a&&a.data?a.data.that:this,d=c.config;"hide"===d.closeAction&&d.animate[1]?(c.mkObj.ctr.removeClass(d.animate[1]),xvDialog.close(c,"hide")):xvDialog.close(c),c.timer?clearTimeout(c.timer):"",b?d.openWindow.off("keyup",c.close):""},show:function(){var a=this,b=a.mkObj;b.ctr.show(),b.mkBox?b.mkBox.show():"",a.resetEvent(a.currentType)},on:function(a,b){var c=this,d=c.config.buttons,e=c.mkObj.buttons;if(a&&b)for(var f=0;f<d.length;f++)if(d[f].id==a&&"function"==typeof b){e[f].on("click",function(){b(c)});break}},drag:function(a){var d=this,e=d.mkObj.ctr,f=d.config,g=f.openWindow;return a.length?void a.on("mousedown",function(a){a.preventDefault();var h,i=e.ps,j=a.clientX-i.left,k=a.clientY-i.top,l=b("<div class='"+c.doms.maskDrag+" '></div>").appendTo(f.body),m=l.get(0);l.outerWidth(d.boxSize.w),l.outerHeight(d.boxSize.h),l.css(i),m.setCapture?(h=l,m.setCapture()):h=g,g.on("mouseup",{that:d,objProt:m,doc:h,dragBox:l},d.clearDrag),h.on("mousemove",{that:d,win:f.openWindow,scrollT:g.scrollTop(),dragBox:l,disX:j,disY:k},d.moveFunc)}):!1},clearDrag:function(a){var b=a.data,c=b.objProt,d=b.doc,e=b.dragBox,f=b.that,g=f.mkObj.ctr.ps;c.releaseCapture&&c.releaseCapture(),f.mkObj.ctr.css({left:g.left,top:g.top}),e.remove(),d.off("mousemove",f.moveFunc),f.config.openWindow.off("mouseup",f.clearDrag)},moveFunc:function(a){var b=a.data,c=b.win,d=b.that,e=b.disX,f=b.disY,g=d.boxSize,h=a.clientX-e,i=a.clientY-f,j=c.width()-g.w,k=c.height()-g.h;0>=h?h=0:h>=j&&(h=j),0>=i?i=0:i>=k&&(i=k),d.setPosition({left:h,top:i,obj:b.dragBox}),a.preventDefault()}}}(window,jQuery);